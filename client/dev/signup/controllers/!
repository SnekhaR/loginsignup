

;(function(ng){
'use strict';

ng.module('Dashboard').controller("myCtrl",['$scope','$resource','$log','Signup',
      'SignupDAO',function($scope,$resource,$log,Signup,SignupDAO) {

  $scope.myFunc = function () {

          
        
          
          var x  = new Object();
          x.firstname = $scope.fname;
          x.lastname = $scope.lname;
          x.email = $scope.aemail;
          x.username = $scope.uname;
          x.password = $scope.apassword;
          var valid = Signup.isValid(x.password);
          console.log(valid);  
          var usernamevalid = Signup.username(x.username);
          console.log(usernamevalid);           
          var emailvalid = Signup.email(x.email);
          console.log(emailvalid);
          var sumup = (valid && usernamevalid);
          if(sumup)
          {
            $scope.regi = "Please Wait...";
          SignupDAO
            .create(x)
            .then(function()
            {
              console.log('return clientController');
              
                $scope.ret = "verification email is sent to the Mail ID mentioned in the above form";
		$scope.regi = "";
		$scope.hideForm = true;

              
            })


                
            .catch($log.error);
            

          }
         else
         {
          $scope.error = "Error Occurred :-/";
	  $scope.errorr="Please Try Again";
        }
         
       

      $scope.myTxt = "request for " + $scope.fname ;

      $scope.fname="";
      $scope.lname="";
      $scope.aemail="";
      $scope.uname="";
      $scope.apassword="";
    
}

}]);
}(window.angular));

